<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bangla Typing | Monkeytype Style</title>

<style>
:root{
 --bg:#1e1e1e;
 --card:#2a2a2a;
 --text:#eaeaea;
 --accent:#4caf50;
 --wrong:#e74c3c;
}
.light{
 --bg:#f3f3f3;
 --card:#ffffff;
 --text:#111;
 --accent:#2e7d32;
 --wrong:#c0392b;
}
body{
 margin:0;
 font-family: Kalpurush, Arial, sans-serif;
 background:var(--bg);
 color:var(--text);
}
.container{
 max-width:900px;
 margin:20px auto;
 padding:20px;
}
.header{
 display:flex;
 justify-content:space-between;
 align-items:center;
}
button{
 background:var(--card);
 color:var(--text);
 border:1px solid #555;
 padding:8px 14px;
 border-radius:6px;
 cursor:pointer;
}
button.active{
 background:var(--accent);
 color:#fff;
}
.modes button{margin:5px}
.text{
 background:var(--card);
 padding:20px;
 border-radius:8px;
 font-size:22px;
 line-height:1.7;
 min-height:120px;
}
.correct{color:var(--accent)}
.wrong{color:var(--wrong);text-decoration:underline}
input{
 width:100%;
 margin-top:20px;
 padding:14px;
 font-size:20px;
 background:transparent;
 border:none;
 border-bottom:2px solid var(--accent);
 color:var(--text);
 outline:none;
}
.stats{
 display:flex;
 justify-content:space-between;
 margin-top:15px;
 font-size:16px;
}
.keyboard{
 display:grid;
 grid-template-columns:repeat(10,1fr);
 gap:6px;
 margin-top:20px;
}
.key{
 background:var(--card);
 padding:10px;
 text-align:center;
 border-radius:5px;
 cursor:pointer;
}
.footer{
 margin-top:30px;
 text-align:center;
 opacity:.6;
}
</style>
</head>

<body>
<div class="container">

<div class="header">
 <h2>‚å®Ô∏è ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ Typing</h2>
 <div>
  <button onclick="toggleTheme()">üåô / ‚òÄÔ∏è</button>
  <button onclick="showHistory()">üìä</button>
 </div>
</div>

<div id="profile"></div>

<div class="modes">
 <button class="active" onclick="setMode('time',60)">60s</button>
 <button onclick="setMode('time',30)">30s</button>
 <button onclick="setMode('time',120)">120s</button>
 <button onclick="setMode('practice',0)">Practice</button>
</div>

<div class="text" id="text"></div>
<input id="input" placeholder="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶ü‡¶æ‡¶á‡¶™ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßã..." oninput="typeCheck()">

<div class="stats">
 <div>‚è± <span id="time">60</span></div>
 <div>‚ö° WPM: <span id="wpm">0</span></div>
 <div>üéØ ACC: <span id="acc">0%</span></div>
</div>

<div class="keyboard" id="keyboard"></div>

<div class="footer">
 Monkeytype-style Bangla Typing Practice
</div>

</div>

<script>
// ====== WORD DATABASE (Expandable) ======
const banglaWords=[
"‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ","‡¶≠‡¶æ‡¶∑‡¶æ","‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑","‡¶¶‡ßá‡¶∂","‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ","‡¶∏‡¶Æ‡¶æ‡¶ú","‡¶∏‡¶Æ‡ßü","‡¶ú‡ßÄ‡¶¨‡¶®","‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø","‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏",
"‡¶∏‡ßç‡¶¨‡¶æ‡¶ß‡ßÄ‡¶®‡¶§‡¶æ","‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ","‡¶â‡¶®‡ßç‡¶®‡ßü‡¶®","‡¶∂‡¶ï‡ßç‡¶§‡¶ø","‡¶ö‡¶ø‡¶®‡ßç‡¶§‡¶æ","‡¶Æ‡¶®","‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶æ‡¶∏","‡¶™‡¶∞‡¶ø‡¶∂‡ßç‡¶∞‡¶Æ","‡¶∏‡¶æ‡¶´‡¶≤‡ßç‡¶Ø","‡¶≠‡¶¨‡¶ø‡¶∑‡ßç‡¶Ø‡ßé",
"‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶æ‡¶≤‡ßü","‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ","‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ","‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶ï","‡¶Ö‡¶ß‡ßç‡¶Ø‡ßü‡¶®","‡¶Ö‡¶®‡ßÅ‡¶∂‡ßÄ‡¶≤‡¶®","‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø","‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ","‡¶ß‡ßà‡¶∞‡ßç‡¶Ø","‡¶∏‡¶æ‡¶π‡¶∏"
];

// ====== RANDOM TEXT ======
function generateText(count=50){
 let arr=[];
 for(let i=0;i<count;i++){
  arr.push(banglaWords[Math.floor(Math.random()*banglaWords.length)]);
 }
 return arr.join(" ");
}

// ====== STATE ======
let mode="time",limit=60,time=60,start=false;
let current="",correct=0,timerInt;

// ====== SET TEXT ======
function setText(){
 current=generateText(50);
 document.getElementById("text").innerHTML=
 current.split("").map(c=>`<span>${c}</span>`).join("");
}
setText();

// ====== MODE ======
function setMode(m,l){
 mode=m;limit=l;time=l;
 document.querySelectorAll(".modes button").forEach(b=>b.classList.remove("active"));
 event.target.classList.add("active");
 reset();
}

// ====== RESET ======
function reset(){
 clearInterval(timerInt);
 start=false;correct=0;
 document.getElementById("input").value="";
 document.getElementById("time").innerText=time;
 document.getElementById("wpm").innerText=0;
 document.getElementById("acc").innerText="0%";
 setText();
}

// ====== TYPING ======
function typeCheck(){
 if(!start){
  start=true;
  if(mode==="time") startTimer();
 }
 let input=inputBox.value;
 let spans=document.querySelectorAll("#text span");
 correct=0;

 spans.forEach((s,i)=>{
  s.className="";
  if(input[i]==null) return;
  if(input[i]===current[i]){
   s.classList.add("correct");correct++;
  }else s.classList.add("wrong");
 });

 if(input.length>=current.length-1){
  setText();
  inputBox.value="";
 }

 let words=input.trim().split(/\s+/).length;
 let used=Math.max(1,limit-time);
 let wpm=Math.round((words/used)*60);
 document.getElementById("wpm").innerText=wpm;
 document.getElementById("acc").innerText=Math.round((correct/current.length)*100)+"%";
}

// ====== TIMER ======
function startTimer(){
 timerInt=setInterval(()=>{
  time--;
  document.getElementById("time").innerText=time;
  if(time<=0){
   clearInterval(timerInt);
   finish();
  }
 },1000);
}

// ====== FINISH ======
function finish(){
 inputBox.disabled=true;
 saveResult();
 saveProfile();
}

// ====== THEME ======
function toggleTheme(){
 document.body.classList.toggle("light");
}

// ====== KEYBOARD ======
const keys=["‡¶ï","‡¶ñ","‡¶ó","‡¶ò","‡¶ô","‡¶ö","‡¶õ","‡¶ú","‡¶ù","‡¶û","‡¶æ","‡¶ø","‡ßÄ","‡ßÅ","‡ßÇ","‡ßá","‡ßà","‡ßã","‡ßå"," "];
const kb=document.getElementById("keyboard");
const inputBox=document.getElementById("input");
keys.forEach(k=>{
 let d=document.createElement("div");
 d.className="key";
 d.innerText=k===" "?"‚ê£":k;
 d.onclick=()=>{inputBox.value+=k;typeCheck();}
 kb.appendChild(d);
});

// ====== HISTORY ======
function saveResult(){
 let h=JSON.parse(localStorage.getItem("history")||"[]");
 h.push({
  date:new Date().toLocaleString(),
  wpm:document.getElementById("wpm").innerText,
  acc:document.getElementById("acc").innerText
 });
 localStorage.setItem("history",JSON.stringify(h));
}
function showHistory(){
 let h=JSON.parse(localStorage.getItem("history")||"[]");
 alert(h.map(x=>`${x.date} | ${x.wpm} WPM | ${x.acc}`).join("\n"));
}

// ====== PROFILE ======
function saveProfile(){
 let p=JSON.parse(localStorage.getItem("profile")||"{}");
 if(!p.name) p.name=prompt("‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßã:");
 p.best=Math.max(p.best||0,document.getElementById("wpm").innerText);
 p.tests=(p.tests||0)+1;
 localStorage.setItem("profile",JSON.stringify(p));
 loadProfile();
}
function loadProfile(){
 let p=JSON.parse(localStorage.getItem("profile")||"{}");
 if(p.name){
  document.getElementById("profile").innerText=
  `üë§ ${p.name} | Best: ${p.best} WPM | Tests: ${p.tests}`;
 }
}
loadProfile();
</script>

</body>
</html>
