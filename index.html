<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Bangla Monkeytype</title>
<style>
:root{
  --bg:#2b2e31;
  --text:#a6a6a6;
  --active:#f5c542;
  --correct:#8fd694;
  --wrong:#ff6b6b;
  --card:#1f2225;
}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family: "Segoe UI", sans-serif;
}
header{
  padding:15px 30px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
header h1{color:var(--active); font-size:24px; margin:0}
.controls{
  display:flex;
  gap:15px;
  justify-content:center;
  margin:20px 0;
}
.controls button{
  background:none;
  border:none;
  color:var(--text);
  cursor:pointer;
  font-size:15px;
}
.controls button.active{color:var(--active)}
#typingBox{
  max-width:900px;
  margin:40px auto;
  font-size:28px;
  line-height:1.6;
}
.word{margin-right:8px}
.correct{color:var(--correct)}
.wrong{color:var(--wrong)}
.activeWord{border-left:3px solid var(--active); padding-left:5px}
#hiddenInput{
  position:absolute;
  opacity:0;
}
#stats{
  text-align:center;
  margin-top:30px;
}
#keyboard{
  max-width:700px;
  margin:30px auto;
  display:grid;
  grid-template-columns:repeat(10,1fr);
  gap:6px;
}
.key{
  background:var(--card);
  padding:10px 0;
  text-align:center;
  border-radius:5px;
  cursor:pointer;
}
</style>
</head>
<body>
<header>
  <h1>বাংলা Monkeytype</h1>
  <div id="profile"></div>
</header>

<div class="controls">
  <button class="active" onclick="setCount(25)">25</button>
  <button onclick="setCount(50)">50</button>
  <button onclick="setCount(100)">100</button>
</div>

<div id="typingBox"></div>
<input id="hiddenInput" autofocus />

<div id="stats">WPM: <span id="wpm">0</span> | Accuracy: <span id="acc">0</span>%</div>

<div id="keyboard"></div>

<script>
// ---- WORD DATABASE (sample, replace with 10k JSON later) ----
const words=["বাংলা","ভাষা","মানুষ","শিক্ষা","দেশ","সমাজ","পরিশ্রম","উন্নতি","স্বপ্ন","সময়","জীবন","প্রযুক্তি","পরিবর্তন","ভবিষ্যৎ","ইতিহাস","সংগ্রাম","স্বাধীনতা","মর্যাদা","বিশ্বাস","সাফল্য"];

let wordCount=25;
let wordIndex=0;
let startTime=null;
let correctChars=0;
let totalChars=0;

const box=document.getElementById("typingBox");
const input=document.getElementById("hiddenInput");

function setCount(c){
  wordCount=c;
  document.querySelectorAll('.controls button').forEach(b=>b.classList.remove('active'));
  event.target.classList.add('active');
  reset();
}

function generate(){
  box.innerHTML="";
  const selected=[];
  for(let i=0;i<wordCount;i++){
    selected.push(words[Math.floor(Math.random()*words.length)]);
  }
  selected.forEach((w,i)=>{
    const span=document.createElement('span');
    span.innerText=w;
    span.className='word'+(i===0?' activeWord':'');
    box.appendChild(span);
  });
}

input.addEventListener('input',()=>{
  if(!startTime) startTime=Date.now();
  const currentWord=box.children[wordIndex];
  const value=input.value.trim();
  if(value.endsWith(' ')){
    totalChars+=currentWord.innerText.length;
    if(value.trim()===currentWord.innerText){
      currentWord.classList.add('correct');
      correctChars+=currentWord.innerText.length;
    }else{
      currentWord.classList.add('wrong');
    }
    currentWord.classList.remove('activeWord');
    wordIndex++;
    if(box.children[wordIndex]) box.children[wordIndex].classList.add('activeWord');
    input.value='';
    updateStats();
  }
});

function updateStats(){
  const mins=(Date.now()-startTime)/60000;
  const wpm=Math.round((correctChars/5)/mins)||0;
  const acc=Math.round((correctChars/totalChars)*100)||0;
  document.getElementById('wpm').innerText=wpm;
  document.getElementById('acc').innerText=acc;
}

function reset(){
  wordIndex=0; startTime=null; correctChars=0; totalChars=0;
  input.value='';
  document.getElementById('wpm').innerText=0;
  document.getElementById('acc').innerText=0;
  generate();
}

// ---- On-screen keyboard ----
const keys=["ক","খ","গ","ঘ","ঙ","চ","ছ","জ","ঝ","ঞ","া","ি","ী","ু","ূ","ে","ৈ","ো","ৌ"," "];
const kb=document.getElementById('keyboard');
keys.forEach(k=>{
  const d=document.createElement('div');
  d.className='key';
  d.innerText=k===' ' ? 'Space':k;
  d.onclick=()=>input.value+=k;
  kb.appendChild(d);
});

reset();
</script>
</body>
</html>
